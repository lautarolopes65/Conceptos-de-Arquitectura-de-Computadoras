EOI EQU 20H 
IMR EQU 21H
INT0 EQU 24H
PIO EQU 30H
N_F10 EQU 15 

ORG 60
IP_F10 DW RUT_F10

ORG 1000H
MSJ1 DB "PRESIONE F10 PARA COMENZAR"
FIN1 DB ?
LONG DB 10
MSJ2 DB ?
ORG 3250H
CONF_PIO:
  MOV AL,01H
  OUT PIO+2,AL ; CA=xxxxxx01b s=0 b=1 
  MOV AL,00H
  OUT PIO+3,AL ; CB=00000000b
RET
ORG 3000H
IMPRIMIR:
  MOV BX,SP
  ADD BX,2
  MOV BX,[BX]
LOOP:
  IN AL,PIO
  AND AL,01H
  JNZ LOOP
  MOV AL,[BX]
  OUT PIO+1,AL
  IN AL,PIO
  AND AL,0FDH
  OUT PIO,AL
  IN AL,PIO
  OR AL,02H
  OUT PIO,AL
  INC BX
  DEC AH
  CMP AH,0
  JNZ LOOP
  RET
ORG 3500H
RUT_F10:
  MOV BX,OFFSET MSJ2
  MOV AH,LONG
  MOV AL,1
leer:
  INT 6
  INC BX
  DEC AH
  CMP AH,0
  JNZ leer
  MOV BX,OFFSET MSJ2
  MOV AH,LONG
  PUSH BX
  CALL IMPRIMIR
  POP BX
  
  MOV DL,1
  MOV AL,EOI
  OUT EOI,AL
IRET
ORG 2000H 
  CLI
  MOV AL,0FCH
  OUT IMR,AL ; habilito f10
  MOV AL,N_F10
  OUT INT0,AL ; id de f10
  STI
  CALL CONF_PIO
  MOV BX,OFFSET MSJ1
  MOV AL,OFFSET FIN1-OFFSET MSJ1
  INT 7
  MOV DL,0
LAZO: CMP DL,0
  JZ LAZO
fin: 
 INT 0
END