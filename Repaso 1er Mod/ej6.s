EOI EQU 20H 
IMR EQU 21H
PIO EQU 30H

ORG 1000H
MSJ DB "ACTIVADO"
FIN1 DB ?
FLAG DB 0
ORG 3500H
CONF_LUCES:
  MOV AL,0FFH
  OUT PIO+2,AL
  MOV AL,00H
  OUT PIO+3,AL
RET

ORG 2000H 
  CALL CONF_LUCES
LOOP:
  IN AL,PIO
  MOV AH,AL
  CMP AL,81H
  JNZ fin
  MOV BX,OFFSET MSJ
  MOV AL,OFFSET FIN1-OFFSET MSJ
  INT 7
patron:
  IN AL,PIO
  CMP AL,AH
  JZ patron
fin: JMP LOOP
 INT 0
END